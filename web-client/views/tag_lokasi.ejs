<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="https://openlayers.org/favicon.ico" />
    <link rel="stylesheet" href="./bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="./fontawesome/css/all.css">
    <link rel="stylesheet" href="/openlayers/ol.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tag Lokasi</title>
</head>
<style type="text/css">
    html,
    body {
        margin: 0;
        height: 100%;
    }

    #map {
        width: auto;
        height: 500px;
        margin-bottom: 5px;
    }
</style>

<body>
    <div class="tittle d-flex" style="position: fixed; z-index: 999;">
        <a href="home"
            style="display:inline-block; margin-top: 21px; margin-left: 10px; padding: 0 15px !important;"><i
                class="fa-solid fa-circle-chevron-left" style="font-size: 35px; color: black;"></i></a>
    </div>
    <div id="map"></div>
    <center>
        <div id="lokasi"></div>
    </center>
    <div class="row">
        <div class="col-xs-12">
            <div class="widget-box">
                <div class="widget-body">
                    <form action="tag_lokasi" method="post">
                        <input type="hidden" name="koordinat" id="lokasiform">
                        <div class="input-group" style="display: flex;">
                            <span class="input-group" style="width: 27%;  ">
                                <select class="form-select" name="nama_ekspedisi">
                                    <option>JNE</option>
                                    <option>JNT</option>
                                    <option>TIKI</option>
                                    <option>Anteraja</option>
                                </select>
                            </span>
                            <input type="text" class="form-control search-query" id="txtlokasi"
                                placeholder="Alamat Lokasi / Kantor" name="lokasi"/>    
                                <button style="background-color: #64B5F6; color: white;" id="btn_upload" class="btn" type="submit">Next</button>
                        </div>
                        
                        <div class="btn-group btn-group-justified" role="group" aria-label="...">
                            <div class="btn-group" role="group">
                            </div>
                        </div>
                    </form> 
                </div>
            </div>
            <div style="padding-top: 5px;">
                *) Untuk koreksi posisi click pada peta atau geser penanda posisi.
            </div>
        </div><!-- /.col -->
    </div><!-- /.row -->
    <script type="module" src="/javascripts/main.js"></script>
    <script src="/openlayers/dist/ol.js"></script>
    <script src="/openlayers/format/GeoJSON.js"></script>
    <script src="/openlayers/renderer/canvas/VectorLayer.js"></script>
    <script src="/openlayers/renderer/webgl/VectorLayer.js"></script>
    <script>
        //mengambil elemen lokasi dan memasukannya ke dalam variabel lokasi
        var lokasi = document.getElementById("lokasi");
        var lokasiform = document.getElementById("lokasiform");
        // var lokasiform = 
    
        function getlokasi() {
            //jika browser mendukung navigator.geolocation maka akan menjalankan perintah di bawahnya
            if (navigator.geolocation) {
                // getCurrentPosition digunakan untuk mendapatkan lokasi pengguna
                //showPosition adalah fungsi yang akan dijalankan
                navigator.geolocation.getCurrentPosition(showPosition);
            }
        }
    
        function showPosition(posisi) {
            // tampilkan kordinat di dalam elemen lokasi
            lokasi.innerHTML = posisi.coords.longitude + ", " + posisi.coords.latitude;
            lokasiform.value = posisi.coords.longitude + " " + posisi.coords.latitude;
        }   
        getlokasi();
    </script>
</body>

</html>